<%
var contest = app.contests[models.contest];
var chart = app.charts[models.chart];
%>

<h2><%=!chart.selected ? 'Add new series' : 'Edit ' + chart.chart_type%></h2>
<div class="form-horizontal">
    <%if (!chart.selected) {%>
    <div class="form-group">
        <label for="chart_type" class="col-xs-5 control-label">Chart type:</label>
        <div class="col-xs-7">
            <select id="chart_type" class="selectpicker form-control">
                <option value="line">line</option>
                <option value="pie" <%=chart.chart_type == 'pie' ? 'selected' : ''%>>pie</option>
            </select>
        </div>
    </div>
    <%}%>
    <div class="form-group">
        <label for="group_by" class="col-xs-5 control-label">X-axis:</label>
        <div class="col-xs-7">
            <select id="group_by" class="selectpicker form-control">
                <%_.each(chart.group_by, function (f, name) {
                %>
                <option value="<%=name%>"><%=name%></option>
                <%
                });%>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="parameter" class="col-xs-5 control-label">Y-axis:</label>
        <div class="col-xs-7">
            <select id="parameter" class="selectpicker form-control">
                <option value="run_cnt">run count</option>
                <%if (contest.scoring == "school") {%>
                <option value="points">points</option>
                <%}%>
                <option value="place">place</option>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="aggregation" class="col-xs-5 control-label">Aggregation:</label>
        <div class="col-xs-7">
            <select id="aggregation" class="selectpicker form-control">
                <option value="sum">sum</option>
                <option value="avg">average</option>
                <option value="min">minimum</option>
                <option value="max">maximum</option>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="period" class="col-xs-5 control-label">Time period:</label>
        <div class="col-xs-7">
            <input type="text" size="20" id="period" class="form-control" value="10">
        </div>
    </div>
    <div class="form-group">
        <label for="color" class="col-xs-5 control-label">Color:</label>
        <div class="col-xs-7">
            <div id="colorpicker" class="input-group colorpicker-component">
                <input type="text" value="black" class="form-control" />
                <span class="input-group-addon"><i></i></span>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <button id="add_series" class="btn btn-default btn-block">Add</button>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <button id="delete_all" class="btn btn-default btn-block">Delete all</button>
        </div>
    </div>
</div>

<h2>Chart examples:</h2>
<a href='#!show_rank_table/charts/default/<%=chart.contests_url_param%>/settings=<%=JSON.stringify(chart.gen_submittions_per_problem_params())%>'>Submittions per problems</a>